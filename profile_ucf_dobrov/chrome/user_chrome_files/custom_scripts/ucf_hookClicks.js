/* hookMouseKeys –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ Dumby, mod 3.7 Dobrov !–Ω—É–∂–µ–Ω —Å–∫—Ä–∏–ø—Ç ucb_SaveHTML
–º–µ–Ω—è–π—Ç–µ –∑–¥–µ—Å—å –ü–æ–¥—Å–∫–∞–∑–∫–∏, Keys –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à, Mouse –∫–ª–∏–∫–∏ –º—ã—à–∏, Menu –∫–æ–º–∞–Ω–¥ –∏ Setup
–ü—Ä–∞–≤—ã–π –∫–ª–∏–∫: –∏–∑–º–µ–Ω–∏—Ç—å 2 –Ω–∏–∂–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ú–µ–Ω—é –∏ —Å—Ç—Ä–æ–∫–∏ "–≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ‚Ä¶" –≤ –º–µ–Ω—é Setup */

(async F=>{eval(F.toString().slice(4)); var Tag = {[F.D]: //tooltips –∫–Ω–æ–ø–æ–∫, –º–µ–Ω—é: —Å–ø—Ä–∞–≤–∫–∞ –≤ help.html
`{
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	‚¨áÔ∏é –ø–∞–ø–∫–∞ [–ó–∞–≥—Ä—É–∑–∫–∏]
‚ó® –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚ûú –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∞–π—Ç
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ –Ω–∞ –§–æ—Ç–æ ‚ûú –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
	–∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –≤–ø—Ä–∞–≤–æÔ∏∞`+ //—Ä–µ–∂–∏–º—ã {–ü—Ä–æ—Å—Ç–æ–πÔ∏∞–≠–∫—Å–ø–µ—Ä—Ç} —Ä–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è|–ø–æ–¥—Å–∫–∞–∑–∫–∏

`‚óß –ª–µ–≤. –î–µ—Ä–∂–∞—Ç—å  –ø–∞–ø–∫–∞ [–ó–∞–≥—Ä—É–∑–∫–∏]\n
‚ó® –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ (Alt+S) ‚ûú –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n    –≤ –µ–¥–∏–Ω—ã–π Html –≤—Å—ë / –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ, ${F.tc("Super","Ctrl+Shift")}+S –∫–∞–∫ –¢–µ–∫—Å—Ç\n
‚óß –¥–≤–∞–∂–¥—ã –Ω–∞ –§–æ—Ç–æ: –Ω–∞–π—Ç–∏ –ü–æ—Ö–æ–∂–∏–µ
‚óß –ª–µ–≤ + Shift   –ì—Ä–∞—Ñ–∏–∫–∞ –≤–∫–ª/–≤—ã–∫–ª}`,[F.P]: //PanelUI —Ñ–æ–Ω –∫–Ω–æ–ø–∫–∏ Blue Gray Red –∑–µ–ª –∂—ë–ª—Ç

`‚óß –ª–µ–≤. –∫–ª–∏–∫	–º–µ–Ω—é Firefox ${F.ver}{\nÔ∏∞
‚óß + Shift	‚§æ –í–µ—Ä–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É\n}
‚óß –¥–µ—Ä–∂–∞—Ç—å	‚úï –ó–∞–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
‚óß +Alt, ‚óâ —Ä–æ–ª–∏–∫  –û–∫–Ω–æ ‚îÇ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å

‚ó® –ø—Ä–∞–≤. –∫–ª–∏–∫	‚á≤ –°–≤–µ—Ä–Ω—É—Ç—å
¬± –∫–æ–ª—ë—Å–∏–∫–æ	–ú–∞—Å—à—Ç–∞–± —Å—Ç—Ä–∞–Ω–∏—Ü—ã {Ô∏∞`/*—ç–∫—Å–ø–µ—Ä—Ç*/+ `
‚ó® + Alt		–°–≤–µ–¥–µ–Ω–∏—è –æ —Å–∏—Å—Ç–µ–º–µ}`, [F.B]: //–∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥: Menu.Dict.cmd()

`‚óâ + Shift		–ó–∞–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫–∏ —Å–ª–µ–≤–∞
‚óâ —Ä–æ–ª–∏–∫ +Alt	‚Ä¶—Å–ø—Ä–∞–≤–∞ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π`, [F.C]: //NewTab. SideBar –æ—Ç–∫—Ä—ã—Ç: –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏–π –≤ –∫–æ–Ω—Å–æ–ª—å
`\n
‚ó® –ø—Ä–∞–≤. –∫–ª–∏–∫	–í–µ—Ä–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	–û—Å—Ç–∞–≤–∏—Ç—å 1 —Ç–µ–∫—É—â—É—é`, [F.I]: //identity-box

`–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫	 –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –≤ –±—É—Ñ–µ—Ä
‚óß –ª–µ–≤ + Shift	 –ú–µ–¥–∏–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ {Ô∏∞\n
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	 –ú–æ–±–∏–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω}
√ò –∫—Ä—É—Ç–∏—Ç—å ¬±	 –Ø—Ä–∫–æ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü `, [F.F]: //FavDir

`–õ–µ–≤—ã–π –∫–ª–∏–∫	‚òÖ –ó–∞–∫–ª–∞–¥–∫–∏\n‚óß –ª–µ–≤ + Alt		–î–æ–º–∞—à–Ω—è—è –ø–∞–ø–∫–∞
–ü—Ä–∞–≤—ã–π		‚ü≥ –ò—Å—Ç–æ—Ä–∏—è\n‚ó® + Alt		–ü–∞–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏\n
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	‚¨áÔ∏é –ó–∞–≥—Ä—É–∑–∫–∏
‚óâ —Ä–æ–ª–∏–∫ +Alt	UserChromeFiles`, [F.Q]: //SetupMenu ‚ó® + Alt –ø–æ—Å–ª.–∑–∞–∫–ª–∞–¥–∫–∞ –º–µ–Ω—é

`  –ª–µ–≤—ã–π –∫–ª–∏–∫ ‚óß –º—ã—à–∏ ¬´–ñ—É—Ä–Ω–∞–ª¬ª\n
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	–º–µ–Ω—é ¬´–î–µ–π—Å—Ç–≤–∏—è¬ª
‚ó® –ø—Ä. –∫–ª–∏–∫	–ë—ã—Å—Ç—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚ó® –¥–µ—Ä–∂–∞—Ç—å	–ü–∏–ø–µ—Ç–∫–∞ —Ü–≤–µ—Ç–∞, –ª–∏–Ω–∑–∞\n
‚óß –ª–µ–≤. + Alt	–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚óß –¥–µ—Ä–∂–∞—Ç—å	–ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ (${F.tc()}T){Ô∏∞\n
√ò –†–æ–ª–∏–∫ ¬±	–º–∞—Å—à—Ç–∞–± –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚óß + Shift	–º–∞—Å—à—Ç–∞–± –¢–µ–∫—Å—Ç / –í—Å—ë}`, [F.M]: //reader-mode
`
–ü—Ä–∞–≤. –∫–ª–∏–∫	–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
Alt + R		–í—ã–±–æ—Ä —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
–ö—Ä—É—Ç–∏—Ç—å ¬±	–Ø—Ä–∫–æ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü `, "ReaderView":

`–ö–ª–∏–∫ –º—ã—à–∏	–ß—Ç–µ–Ω–∏–µ –≤ ReaderView
–ö–æ–ª—ë—Å–∏–∫–æ	–ü—Ä–æ—Å—Ç–æ–π —Ä–µ–∂–∏–º —á—Ç–µ–Ω–∏—è\n`, [F.L]: //Print

`–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (${F.tc()}P)\n
–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫	–±—ã—Å—Ç—Ä–∞—è –ü–µ—á–∞—Ç—å
‚óâ —Ä–æ–ª–∏–∫ —Ä–µ–∂–∏–º –ü—Ä–æ—Å—Ç–æ–π | –≠–∫—Å–ø–µ—Ä—Ç
‚óß –¥–µ—Ä–∂–∞—Ç—å	–∫—Ä–∞—Ç–∫–∞—è –°–ø—Ä–∞–≤–∫–∞`, [F.N]: //Reload

`–ø—Ä–∞–≤. –∫–ª–∏–∫	–û–±–Ω–æ–≤–∏—Ç—å –±–µ–∑ –∫—ç—à–∞
‚óß –¥–µ—Ä–∂–∞—Ç—å	–û–±–Ω–æ–≤–∏—Ç—å –≤—Å—ë`, [F.O]: //–©–∏—Ç

`–∫–ª–∏–∫ –º—ã—à–∏	–°–≤–µ–¥–µ–Ω–∏—è –æ –∑–∞—â–∏—Ç–µ —Å–∞–π—Ç–∞\n
‚ó® –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫	–ö—É–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–∞
‚óß –ª–µ–≤. –¥–µ—Ä–∂–∞—Ç—å	‚áÜ Web-—à—Ä–∏—Ñ—Ç—ã
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ		ServiceWorkers`, "wheel-stop":

`‚óâ –ö–æ–ª—ë—Å–∏–∫–æ	–ü—Ä–µ—Ä–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è {Ô∏∞
‚ó® –ø.–¥–µ—Ä–∂–∞—Ç—å	–ê–Ω—Ç–∏–∑–∞–ø—Ä–µ—Ç ‚áÜ –ë–µ–∑ –ø—Ä–æ–∫—Å–∏}`, [F[0]]: //‚òí –∫—Ä–æ–º–µ Windows

`–ó–∞–∫—Ä—ã—Ç—å Firefox ${F.ver}\n
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	–≤–µ—Ä–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É
‚óß –¥–µ—Ä–∂–∞—Ç—å	–∫—Ä–∞—Ç–∫–∞—è –°–ø—Ä–∞–≤–∫–∞\n‚ó® –ø—Ä. –∫–ª–∏–∫	‚á≤ –°–≤–µ—Ä–Ω—É—Ç—å`, [F.R]:

`	–ê—Ç—Ä–∏–±—É—Ç-–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä
‚óâ –∫–æ–ª—ë—Å–∏–∫–æ	–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±—Ä–∞—É–∑–µ—Ä–∞\n\n‚ó® –ø—Ä. –∫–ª–∏–∫`, [F.E]: //extensions

`	–†–∞—Å—à–∏—Ä–µ–Ω–∏—è\n‚ó® –ø—Ä–∞–≤. –∫–ª–∏–∫	–º–µ–Ω—é ¬´–î–µ–π—Å—Ç–≤–∏—è¬ª\n\n‚óâ –∫–æ–ª—ë—Å–∏–∫–æ`},

Menu = { //–∫–æ–º–∞–Ω–¥—ã —é–∑–µ—Ä–∞: alt –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫, mid –∫–æ–ª—ë—Å–∏–∫–æ, upd –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–æ–∫—É
	View: { //–∏–º—è –∫—É—Ä—Å–∏–≤–æ–º –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏, –æ–±–≤–æ–¥–∫–∞: –∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏
		lab: `–ú–æ–±–∏–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω | –¥–ª—è –ß—Ç–µ–Ω–∏—è`, inf: F.b, //–ø–æ–¥—Å–∫–∞–∑–∫–∞
		img: F.Z +"aboutdebugging-connect-icon.svg",
		alt(btn){ // –≤–ª–æ–∂–µ–Ω–Ω—ã–µ Sub-–º–µ–Ω—é –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è
			btn.ownerDocument.getElementById("key_toggleReaderMode").doCommand()}, //—à—Ç–∞—Ç–Ω—ã–π –†–µ–∂–∏–º —á—Ç–µ–Ω–∏—è
		cmd(btn){
			btn.ownerDocument.getElementById("key_responsiveDesignMode").doCommand(); //–ø—É–Ω–∫—Ç –º–µ–Ω—é —Å HotKey
			gBrowser.selectedBrowser.browsingContext.inRDMPane && BrowserEx("reload");},
	},
	HTML: {lab: `–≠–∫—Å–ø–æ—Ä—Ç —Å–∞–π—Ç–∞ –≤ –µ–¥–∏–Ω—ã–π HTML`, img: F.Z +"globe.svg",
		inf: `–∏—Å–ø–æ–ª—å–∑—É—è —Å–∫—Ä–∏–ø—Ç SaveHTML\n–∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ SingleFile`,
		cmd(){ HTML()}
	},
	Tab: {lab: `–í–µ—Ä–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É | –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ`, inf: F.b, img: F.Z +"reload.svg",
		cmd(btn){btn.ownerGlobal.undoCloseTab()},
		alt(){
			with (gBrowser) selectAllTabs(),reloadMultiSelectedTabs(),clearMultiSelectedTabs()}
	},
	Fav: {lab: `–ó–∞–∫–ª–∞–¥–∫–∏ 1-–∞—è —Å—Å—ã–ª–∫–∞ ‚áÖ –ü–æ—Å–ª–µ–¥–Ω—è—è`,
		inf: `–Ω–∞ –Ø–Ω–¥–µ–∫—Å, –µ—Å–ª–∏ –º–µ–Ω—é ¬´–ó–∞–∫–ª–∞–¥–∫–∏¬ª –ø—É—Å—Ç–æ–µ\n–ø—Ä–∞–≤. –∫–ª–∏–∫ + Alt –Ω–∞ –∫–Ω–æ–ø–∫–µ –ë—ã—Å—Ç—Ä—ã—Ö –æ–ø—Ü–∏–π`,
		cmd(){
			toTab(FavItem())},
		alt(){toTab(FavItem(true))}
	},
	Dict: { sep: 1, //—Å–ø–µ—Ä–≤–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
		lab: `–ì—É–≥–ª-–ø–µ—Ä–µ–≤–æ–¥ –°–∞–π—Ç/–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –¢–µ–∫—Å—Ç`,
		cmd(){Translate()}
	},
	O: { men: 1, img: F.opt, //–ø–æ–¥–º–µ–Ω—é, –ª—é–±–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
		lab: `–û–ø—Ü–∏–∏ about:config | –°—Ç—Ä–∞–Ω–∏—Ü—ã`, inf: `–ü—Ä–∞–≤—ã–π –∫–ª–∏–∫: about-page`, alt(){toTab("about:about")},
		js: {lab: "–í—ã–ø–æ–ª–Ω—è—Ç—å —Å–∫—Ä–∏–ø—Ç—ã Java", inf: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∏, —Ä–µ–∫–ª–∞–º—ã\n–¥–µ–π—Å—Ç–≤–∏—è –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à",
			upd(){this.image = Pref("javascript.enabled") ? F.ok : F.no;
			},
			cmd(){Pref("javascript.enabled", !Pref("javascript.enabled"))}
		},
		DwDir: {lab: `–ø–∞–ø–∫–∞ –ó–∞–≥—Ä—É–∑–∫–∏ | chrome:`, inf: F.b, img: F.dir,
			cmd(){
				Downloads.getPreferredDownloadsDirectory().then(path => FileUtils.File(path).launch(),Cu.reportError)},
			alt(){UcfGlob.dirGet("UChrm")}
		},
		"–†–µ–∂–∏–º –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ —Å–∞–π—Ç–æ–≤": {
			inf: `–°–∞–π—Ç –Ω–µ ¬´—É–∑–Ω–∞–µ—Ç¬ª –≤–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–∫–∞—Ö`,
			cmd(){
				var p = "fission.autostart"; Pref(p, !Pref(p));
			},
			upd(){ var i = F.sec;
				if(Pref("fission.autostart"))
					i = i.replace("-in","-");
				this.image = i;}
		},
		"–°–≤–µ–¥–µ–Ω–∏—è –æ –±—Ä–∞—É–∑–µ—Ä–µ": { sep: 1,
			cmd(){toTab()}, img: "resource://gre-resources/password.svg"
		},
		"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞": {
			cmd(){toTab('about:profiling')}
		},
		Remote: {lab: `–£–¥–∞–ª—ë–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞`,
			cmd(chr = "devtools.chrome.enabled",rem = "devtools.debugger.remote-enabled"){
				if(!Pref(chr) || !Pref(rem)){
					Pref(chr,true); Pref(rem,true);
				}
				var {BrowserToolboxLauncher} = ChromeUtils.import("resource://devtools/client/framework/browser-toolbox/Launcher.jsm");
				BrowserToolboxLauncher.init();}
		},
		"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ UserChromeFiles": {sep: 1, img: F.opt, cmd(){UCF()} //UCFprefs
		},
		DelCache: {lab: `Restart –±—Ä–∞—É–∑–µ—Ä, —É–¥–∞–ª–∏—Ç—å –∫—ç—à`, img: F.Z +"clear.svg",
			cmd(){
				if(!UcfGlob.maybeRestart(false, ()=>true)) return;
				Services.appinfo.invalidateCachesOnRestart();
				with(Services.startup) quit(eAttemptQuit | eRestart);}}
	},
	VPN: {lab: `VPN –ê–Ω—Ç–∏–∑–∞–ø—Ä–µ—Ç | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Proxy`, inf: F.w +"\nCensor Tracker —Ç–æ–ª—å–∫–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è",
		upd(){
			this.image = Pref(F.x) == 2 ? F.ok : F.no;},
		cmd(){switchProxy()},
		alt(){CfgProxy()}
	},
	Pics: { alt(){ Pref(F.v, 3); BrowserEx("reload");}, inf: 1,
		upd(){ var val = Pref(F.v), s = val == 1, i = F.X;
			this.label = `–ì—Ä–∞—Ñ–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü ‚Äì ${s ? "–≤–∫–ª—é—á–µ–Ω–∞" : val == 3 ? "—Ç–æ–ª—å–∫–æ —Å–∞–π—Ç" : "–∑–∞–ø—Ä–µ—â–µ–Ω–∞"}`;
			this.image = s ? i.replace("-blocked","") : i || F.nul;
			this.tooltipText = `–ø—Ä–∞–≤—ã–π –ö–ª–∏–∫: –∫—Ä–æ–º–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö\n${F.v} = ${val}`;
		},
		cmd(){
			var n = Pref(F.v) != 1; Pref(F.v, n ? 1 : 2);
			mode_skin(); BrowserEx("reload");
			Status(`–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ${n ? "‚àö —Ä–∞–∑—Ä–µ—à" : "‚úò –∑–∞–ø—Ä–µ—â"}–µ–Ω–æ`,3e3);}
	},
	EyeDrop: {lab: `–ü–∏–ø–µ—Ç–∫–∞ —Ü–≤–µ—Ç–∞, –õ–∏–Ω–∑–∞`, img: F.eye, sep: 1,
		cmd(btn){
			var url = `resource://devtools/shared/${parseInt(F.ver) > 95 ? "loader/" : ""}Loader.`;
			try {var exp = ChromeUtils.importESModule(url + "sys.mjs");} catch {exp = ChromeUtils.import(url + "jsm");}
			var obj = exp.require("devtools/client/menus").menuitems.find(menuitem => menuitem.id == "menu_eyedropper");
			(obj.oncommand.bind(null, {target: btn}))();
			UcfGlob.Flash(0,'rgba(100,0,225,0.1)',0, F.e);}
	},
	"–ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ | –ñ–µ—Å—Ç—ã –º—ã—à–∏": { inf: F.b, img: F.Z +"help.svg",
		alt(s = "ucf_mousedrag.js"){
			var h = document.getElementById("nav-bar").ucf_mousedrag;
			h ||= F.q + s;
			Services.prompt.alert(null,"–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∂–µ—Å—Ç–∞–º –º—ã—à–∏",`–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –≤–ø—Ä–∞–≤–æ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å\n\n`+ h);},
		cmd(){Help()}
	},
	Run: { //–∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Alt+x)
		upd(js = Pref([F.u +"my_run", F.run])){
			js &&= js.split('‚ïë'); if(Array.isArray(js) && js.length < 4)
				js = F.run.split('‚ïë'); 
			Pref(F.u +"my_run",js.join("‚ïë")); F.js = js;
			this.label = js[0] +" (Alt+x)",this.tooltipText = F.a + js[1]; this.run = js[1];
		},
		alt(){aboutCfg(F.u +"my_run")}, //–ø—Ä–∞–≤–∏—Ç—å js-–∫–æ–¥
		cmd(btn){eval(btn.run)}
	},
	Run2: { img: F.Z +"tool-application.svg",
		upd(js = F.js.slice(2,4)){
			this.label = js[0], this.tooltipText = F.a + js[1]; this.run = js[1];
		},
		alt(){aboutCfg(F.u +"my_run")},
		cmd(btn){eval(btn.run)}
	}},

Keys = { //–ø–µ—Ä–µ—Ö–≤–∞—Ç-–∫–ª–∞–≤–∏—à KeyA[_mod][_OS](e,t){–∫–æ–¥} –∏ KeyB: "KeyA"
	KeyX_1(e,t){userjs(e)}, // Alt+X –∑–∞–ø—É—Å–∫ –≤–Ω–µ—à–Ω–µ–≥–æ JS-–∫–æ–¥–∞
	KeyS_6(){saveSelToTxt()}, // Ctrl+Shift+S
	KeyS_15_macosx: "KeyS_6", // Super+S
	KeyS_1(e,t){HTML()}, //Alt+S | e: Event, t: gBrowser.selectedTab
/*
	mod = e.metaKey*8 + e.ctrlKey*4 + e.shiftKey*2 + e.altKey
	mod + I –≤ –∫–æ–Ω—Ü–µ: —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞, ¬´i¬ª –∫—Ä–æ–º–µ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
	1—è –±—É–∫–≤–∞ —Å—Ç—Ä–æ—á–Ω–∞—è: –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è, –∑–∞–ø—Ä–µ—Ç preventDefault
	–æ—Ç–¥–µ–ª—è—Ç—å ¬´_¬ª –æ—Ç –∫–æ–¥–∞, –µ—Å–ª–∏ –µ—Å—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏/–∏–ª–∏ ¬´iI¬ª-—Ñ–ª–∞–≥
	—Ç–æ–ª—å–∫–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π OS: KeyA_1i_win(e,t){‚Ä¶ Alt+A –¥–ª—è –≤–∏–Ω–¥—ã */
},

Mouse = { //–∫–ª–∏–∫–∏ Meta*64 Ctrl*32 –®–∏—Ñ—Ç*16 Alt*8 (Wh ? 2 : But*128) long*1
	"urlbar-input": {
		2(trg, forward){trg.value = ""} //–æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–ª—ë—Å–∏–∫–æ–º
	},
	[F.B +"s"]: { //<> –≤–∫–ª–∞–¥–∫–∏ –∫–æ–ª—ë—Å–∏–∫–æ–º
		2(trg,forward){
			gBrowser.tabContainer.advanceSelectedTab(forward ? -1 : 1,true)},
		128(btn){ //–°–ú
			if(btn.id == F.C)
				gBrowser.removeAllTabsBut(gBrowser.selectedTab)
			else
				gBrowser.removeTab(TabAct(btn));}, //–≤–∫–ª–∞–¥–∫–∞ –ø–æ–¥ –º—ã—à—å—é
		136(){
				gBrowser.removeTabsToTheEndFrom(gBrowser.selectedTab, {animate: true});
			}, //C+Alt –∑–∞–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫–∏ —Å–ø—Ä–∞–≤–∞
		144(){ //C+Shift ‚Ä¶ —Å–ª–µ–≤–∞
			gBrowser.removeTabsToTheStartFrom(gBrowser.selectedTab, {animate: true});
			},
		8(){},16(){},64(){} //–≤—ã–±–æ—Ä
	},
	[F.C]: { //newTab
		256(btn){btn.ownerGlobal.undoCloseTab()}
	},
	"stop-button": {
		128(){ //–°
			for (var i = 0; i < gBrowser.tabs.length; i++) gBrowser.getBrowserAtIndex(i).stop() },
		257(){switchProxy()}
	},
	[F.A + F.K]: { //ReaderView
		2(trg,forward){bright(trg,forward,5)}, //—è—Ä–∫–æ—Å—Ç—å –ø–æ wheel ¬±
		128(btn){Menu.View.alt(btn)},
		256(btn){Mouse[F.M][256](btn)}
	},
	"appMenu-print-button2": { //–º–µ–Ω—é –ü–µ—á–∞—Ç—å‚Ä¶
		1(){Help()}, 128(){Expert()},
		256(){Mouse[F.L][256]()}
	},
	[F.L]: { //print
		1(){Help()}, //–¥
		128(){Expert()},
		256(){document.getElementById("menu_print").doCommand()} //R
	},
	[F.M]: { //‚ûø
		2(trg,forward){bright(trg,forward,5)}, //—è—Ä–∫–æ—Å—Ç—å
		256(btn){Menu.View.cmd(btn)} //MobileView
	},
	[F.N]: { //reload
		1(){Menu.Tab.alt()}, //–¥
		128(){for (var i = 0; i < gBrowser.tabs.length; i++) gBrowser.getBrowserAtIndex(i).stop()}, //–°–ú
		256(){BrowserEx("reloadSkipCache")}, //R
		257(){switchProxy()} //–¥R
	},
	[F.D]: {mousedownTarget: true, //–Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –¥–∞–ª—å—à–µ
		1(){ Menu.O.DwDir.cmd()}, //–¥
		16(){Menu.Pics.cmd()},//+Shift
		128(){Exp()
			? saveSelToTxt() : //—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å|–≤—ã–¥–µ–ª–µ–Ω. –∫–∞–∫ .txt
			Downloads.getSystemDownloadsDirectory().then(path => FileUtils.File(path).launch(),Cu.reportError)},
		256(){HTML()} //web
	},
	[F.P]: {mousedownTarget: true, //PanelUI
		1(btn){goQuitApplication(btn)}, //–¥
		2(trg,forward){zoom(forward)}, //wheel
		16(btn){btn.ownerGlobal.undoCloseTab()}, //L+Shift
		8(){windowState != STATE_MAXIMIZED ? maximize() : restore()}, //L+Alt
		128(){windowState != STATE_MAXIMIZED ? maximize() : restore()},
		129(){BrowserEx("fullScreen")}, //–¥–°
		136(){this[129]()}, //–°+Alt
		144(){Mouse[F.Q][136]()}, //C+Shift
		256(){minimize()},
		264(){toTab()}, //R+Alt
		272(btn){btn.ownerGlobal.PlacesCommandHook.showPlacesOrganizer("History")} //R+Shift
	},
	[F.I]: { //–∑–∞–º–æ–∫
		8(){UCF()}, //+Alt
		128(btn){Menu.View.cmd(btn)},
		16(btn){ //+Shift
			BrowserEx("pageInfo", btn,"mediaTab") //securityTab feed‚Ä¶ perm‚Ä¶
		},
		2(trg,forward){bright(trg,forward,5)}, //—è—Ä–∫–æ—Å—Ç—å
		10(trg,forward){bright(trg,forward)},
		256(){gClipboard.write(gURLBar.value);
			UcfGlob.Flash(0,'rgba(240,176,0,0.5)',0,"–≤ –±—É—Ñ–µ—Ä–µ: "+ gURLBar.value.slice(0,80));}
	},
	[F.F]: { //favdirs –∫–Ω–æ–ø–∫–∞
		0(btn){btn.ownerGlobal.SidebarUI.toggle("viewBookmarksSidebar")},
		256(btn){btn.ownerGlobal.SidebarUI.toggle("viewHistorySidebar")},
		8(){UcfGlob.dirGet("Home")}, //+Alt
		128(btn){
			btn.ownerGlobal.PlacesCommandHook.showPlacesOrganizer("Downloads")},
		136(){ //C+Alt
			UcfGlob.dirGet("UChrm", "user_chrome_files")},
		264(){ //R+Alt
			UcfGlob.dirGet("GreD")}
	},
	[F.O]: { //—â–∏—Ç
		1(){Mouse[F.Q][136]()}, //–¥ –®—Ä–∏—Ñ—Ç—ã
		2(trg,forward){bright(trg,forward)},
		256(btn){Cookies()},//R –∫—É–∫–∏
		128(){toTab("about:serviceworkers")} //–°
	},
	[F[2]]: {2(trg,forward){zoom(forward)}}, //zoompage
	[F[3]]: {2(){Mouse[F[2]][2]()}},
	[F[0]]: { //title-close
		1(){Help()},
		128(btn){btn.ownerGlobal.undoCloseTab()},
		256(){minimize()}
	},
	[F.R]: {mousedownTarget: true, //AttrView
		0(){Status("Ctrl+Shift+C - copy tooltip's contents")},
		128(){Menu.O.Remote.cmd()}, //C
		256(){UCF()},
		257(){toTab('about:debugging#/runtime/this-firefox')} //–¥R
	},
	[F.E]: {mousedownTarget: true,
		1(){
			Menu.O.DelCache.cmd();
		}, //–¥
		128(btn){btn.id && UCF()}, //UCFprefs
		129(){ //–¥–°
			toTab('about:addons')},
		256(btn){
			btn.id && F.menu.openPopup(btn, "after_start");
		},
		257(){Mouse[F.R][257]()}
	},
	[F.Q]: {mousedownTarget: true,
		0(btn, n){ //L
			if(btn.id == F.Q){
				var bar = document.getElementById("ucf-additional-vertical-bar");
				bar && window.setToolbarVisibility(bar,document.getElementById("sidebar-box").hidden);
				window.SidebarUI.toggle("viewHistorySidebar"); return;
			}
			if (btn.cmd){ //UserMenu
				btn.cmd[n] && btn.cmd[n](btn);
			} else if (btn.className == "menu-iconic"){
				aboutCfg(btn.pref.pref); //go –ø–∞—Ä–∞–º–µ—Ç—Ä
				Last && Last.hidePopup();
			}; mode_skin();
		},
		2(trg,forward){zoom(forward)}, //wheel
		1(btn){ //–¥
			btn.id == F.Q && toTab("about:newtab");
		},
		8(){toTab('chrome://browser/content/places/places.xhtml')}, //L+Alt
		264(){ //R+Alt
			toTab(FavItem(true))},
		16(btn){if (btn.id == F.Q) zoom(0,1)}, //L+Shift
		128(btn, n, trg){ //C Menu-1
			if(btn.id)
				btn.menupopup.openPopup(trg || btn, "after_start");
			if (btn.cmd) //UserMenu
				btn.cmd[n] && btn.cmd[n](btn);
			mode_skin();
		},
		129(btn){if(btn.id) userjs(btn,"");}, //–¥C –∫–æ–Ω—Å–æ–ª—å
		256(btn, n){ //config Menu
			if(btn.id == F.Q) setTimeout(()=> {
				with(btn.config)
					eval(`${state != "open" ? "open" : "hide"}Popup(btn,"after_start")`);
			}, 50);
			if (btn.cmd){ //UserMenu
				F.menu.hidePopup();
				btn.cmd[n] && btn.cmd[n](btn);
			} else
				try{btn.parentNode.hidePopup();} catch{}
		},
		257(btn){ //–¥R
			btn.id == F.Q && Menu.EyeDrop.cmd(btn); //–ª–∏–Ω–∑–∞
		},
		136(){ //–°+Alt
			var n = "browser.display.use_document_fonts",f = Pref(n) ? 0 : 1;
			Pref(n,f); zoom(0,0,0,(f > 0) ? " + Web-—à—Ä–∏—Ñ—Ç—ã" : ""); BrowserEx("reload");}
	}
}; Mouse["add-ons-button"] = Mouse[F.E];
Object.keys(Mouse).forEach((k) =>{Mus["."+ k] = Mus["#"+ k] = Mouse[k]});

var Setup = [{ //about:config –º–µ–Ω—é. refresh=true ‚ü≥ –û–±–Ω–æ–≤–∏—Ç—å –±–µ–∑ –∫—ç—à–∞. restart=false ‚ÜØ –ë–µ–∑ –∑–∞–ø—Ä–æ—Å–∞, –ò–∑–º–µ–Ω–µ–Ω–æ: –∫—É—Ä—Å–∏–≤
	pref: ["dom.disable_open_during_load", "–í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞",,"dom.disable_beforeunload\n–ó–∞–ø—Ä–æ—Å —Å—Ç—Ä–∞–Ω–∏—Ü –æ –∑–∞–∫—Ä—ã—Ç–∏–∏\n\n–û–ø—Ü–∏–∏ "+ F.m +": C–µ—Ä—ã–µ"], Def3el: true, Yellow: false,
	keys: [[true, "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å",,,`Pref('dom.disable_beforeunload',true)`], [false, "–†–∞–∑—Ä–µ—à–∏—Ç—å",,,`Pref('dom.disable_beforeunload',false)`]],
},{ //—Å–µ—Ä—ã–π –∑–Ω–∞—á–æ–∫: –æ–ø—Ü–∏—è –Ω–µ –∑–∞–¥–∞–Ω–∞|–∏–ª–∏ Gray. –°–∏—Ä–µ–Ω—å: —é–∑–µ—Ä, –ñ—ë–ª—Ç: Yellow, –ù–µ —Ä–∞–≤–Ω–æ Def3el: –ö—Ä–∞—Å–Ω—ã–π, –û–±–≤–æ–¥–∫–∞: –Ω–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
	pref: [F.t, "–û–ø–∞—Å–Ω—ã–µ —Ñ–∞–π–ª—ã, —Å–∞–π—Ç—ã",,F.t +"_host"], Def3el: true, Yellow: false,
	keys: [[true, "–ó–∞–ø—Ä–µ—Ç",,,`Pref(F.t +'_host',true)`], [false, "–û—Ç–∫—Ä—ã—Ç—å",,,`Pref(F.t +'_host',false)`]]
},{ //pref,lab,key,hint,[val,str],code | keys:val,lab,dat,+hint,code,pref_my | icon:–∑–Ω–∞—á–æ–∫
	pref: [F.S, "–°–∞–π—Ç",,"–ù–µ–∫–æ—Ç–æ—Ä—ã–º —Å–∞–π—Ç–∞–º –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ Clipboard"], Def3el: false, Yellow: true,
	keys: [[true, "—É–ø—Ä–∞–≤–ª—è—Ç—å –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞"], [false, "–Ω–µ –∏–∑–º–µ–Ω—è—Ç—å –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞"]]
},{
	pref: [F.u +"savedirs", "–ó–∞–≥—Ä—É–∑–∫–∏",,'–ü—É—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –°–∞–π—Ç–æ–≤ –∏ –ì—Ä–∞—Ñ–∏–∫–∏\n–°–∏–Ω—Ç–∞–∫—Å–∏—Å ¬´Html/subdir|Pics/subdir¬ª\nsubdir: –ø—É—Å—Ç–æ | 0 –∑–∞–≥–æ–ª–æ–≤–æ–∫ | 1 –¥–æ–º–µ–Ω',
		["", "–≤—Å—ë –≤ –æ–±—â–µ–π –ø–∞–ø–∫–µ"]], Gray: "", Blue: "-Web|1|-Images|0", Def3el: "–°–∞–π—Ç||–§–æ—Ç–æ|0", Yellow: "Site||Photo|0",
	keys: [ //—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Html/Pics. [–ó–∞–≥—Ä—É–∑–∫–∏]/"_Html/subdir|_Pics/subdir" subdir: –ø—É—Å—Ç–æ | 0 –∑–∞–≥–æ–ª–æ–≤–æ–∫ | 1 –¥–æ–º–µ–Ω
		[Pref([F.u +"savedirs_my", "–°–∞–π—Ç||–§–æ—Ç–æ|"]), F.g,,"–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å ¬´–ø–æ–¥ —Å–µ–±—è¬ª",,F.u +"savedirs_my"],
		["–°–∞–π—Ç||–§–æ—Ç–æ|0", "–°–∞–π—Ç|–§–æ—Ç–æ/–∏–º—è‚Ä¶"],
		["Site||Photo|0", "Site|Pics/–∏–º—è"],
		["-Web|1|-Images|0", "-Web/—Å–∞–π—Ç|-Images/–∏–º—è"],
		["_Web|1|_Photo|1", "_Web/—Å–∞–π—Ç|_Photo/‚Ä¶"],
		["_Web|0|_Pics|", "_Web/–∏–º—è|_Pics"]]
},null,{
	pref: [F.y, "–ü—Ä–æ–∫—Å–∏ (VPN)", "–ø", F.x +"\n\n–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫"],
		Def3el: "localhost", Yellow: F.w, Gray: "", refresh: true,
	keys: [
		["localhost", "—Å–∏—Å—Ç–µ–º–Ω—ã–π", "0",,`Pref(F.x,5)`],
		[F.w, "–ê–Ω—Ç–∏–ó–∞–ø—Ä–µ—Ç", "2", "–ù–∞–¥—ë–∂–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∞–π—Ç—ã\n¬´–†–µ–∂–∏–º –ø—Ä–æ–∫—Å–∏¬ª –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ 2",
			`Pref(F.x,2)`],
		["127.0.0.1", "tor –∏–ª–∏ opera-proxy", "1", "–í–∫–ª—é—á–∏—Ç–µ –æ–¥–Ω—É –∏–∑ —Å–ª—É–∂–±",
			`Pref(F.x,1)`],
		[Pref(["user.pacfile", "file:///etc/proxy.pac"]), "user .pac —Ñ–∞–π–ª", "4", "about:config pacfile"]] //–Ω—É–∂–µ–Ω –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ pac-—Ñ–∞–π–ª–∞
},{
	pref: [F.x, "–†–µ–∂–∏–º –ø—Ä–æ–∫—Å–∏", "—Ä"], Gray: 0, Def3el: 5, Blue: 4, Yellow: 2, refresh: true,
	keys: [[5, "—Å–∏—Å—Ç–µ–º–Ω—ã–π", "5"],
		[2, "–ê–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥ PAC", "2", "about:config PAC —Ñ–∞–π–ª"],
		[1, "–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞", "1", "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "+ F.y],
		[4, "–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ", "4"],
		[0, "–ë–µ–∑ –ø—Ä–æ–∫—Å–∏", "0", F.m]]
},{
	pref: ["network.trr.mode", "DNS –ø–æ–≤–µ—Ä—Ö HttpS",,"–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ DNS-—Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è\n–∑–∞—â–∏—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"], Def3el: 2, Yellow: 3, Gray: 5, Blue: 1, refresh: true,
	keys: [
		[0, F.m, "0"], [1, "–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏", "1", "–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DNS –∏–ª–∏ DoH, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –±—ã—Å—Ç—Ä–µ–µ"], [2, "DoH, –∑–∞—Ç–µ–º DNS", "2"], [3, "—Ç–æ–ª—å–∫–æ DoH", "3"], [4, "DNS –∏ DoH", "4"], [5, "–æ—Ç–∫–ª—é—á–∏—Ç—å DoH", "5"]]
},{
	pref: ["network.cookie.cookieBehavior", "–ü–æ–ª—É—á–∞—Ç—å –∫—É–∫–∏",,"–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö —Å–∞–π—Ç–æ–≤"], 
		Def3el: 3, Yellow: 0, Blue: 4,
	keys: [[3, "–ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ —Å–∞–π—Ç—ã"], [4, "–∫—Ä–æ–º–µ —Ç—Ä–µ–∫–µ—Ä–æ–≤"], [0, "—Å–æ –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤"], [1, "–∫—Ä–æ–º–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö"], [2, "–Ω–∏–∫–æ–≥–¥–∞"]]
},null,{
	pref: ["browser.display.use_document_fonts", "–ó–∞–≥—Ä—É–∂–∞—Ç—å —à—Ä–∏—Ñ—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü"], Def3el: 1, Yellow: 0, refresh: true,
	keys: [[1, "–î–∞"], [0, "–ù–µ—Ç"]]
},{
	pref: ["font.name.sans-serif.x-cyrillic", "–®—Ä–∏—Ñ—Ç –±–µ–∑ –∑–∞—Å–µ—á–µ–∫ ",,"–¢–∞–∫–∂–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏\n–°–∏—Å—Ç–µ–º–Ω—ã–π: –∑–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞"], Def3el: "", Yellow: "Roboto", Gray: "Arial", keys: sans
},{
	pref: ["font.name.serif.x-cyrillic", "–®—Ä–∏—Ñ—Ç —Å –∑–∞—Å–µ—á–∫–∞–º–∏"], Def3el: "", Yellow: "Arial", keys: serif
},{
	pref: ["gfx.webrender.force-disabled", "–£—Å–∫–æ—Ä—è—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü",,"gfx.webrender.compositor.force-enabled\ngfx.webrender.all\n\n–ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–æ–π,\n–æ—Ç–∫–ª—é—á–∏—Ç–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –≥—Ä–∞—Ñ–∏–∫–æ–π"],
	Def3el: false, Yellow: true, Gray: undefined, restart: true, keys: [
		[false, "–î–∞",,,`[['gfx.webrender.compositor.force-enabled', true], ['gfx.webrender.all', true]].map((a) =>{Pref(...a)})`],
		[true, "–ù–µ—Ç",,,`[['gfx.webrender.compositor.force-enabled', false],['gfx.webrender.all', false]].map((a) =>{Pref(...a)})`]]
},null,{
	pref: ["media.autoplay.default", "–ê–≤—Ç–æ-play –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ"], Def3el: 0, Yellow: 2, Gray: 5, refresh: true,
	keys: [
		[0, "–†–∞–∑—Ä–µ—à–∏—Ç—å", "0"], [2, "–°–ø—Ä–∞—à–∏–≤–∞—Ç—å", "2"], [1, "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å", "1"], [5, "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å", "5"]]
},{
	pref: ["dom.storage.enabled", "–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ",,"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ\n–∫–æ—Ç–æ—Ä—ã–º –≤–∞—Å –º–æ–∂–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å"],
	Def3el: false, Yellow: true,
	keys: [[true, "–†–∞–∑—Ä–µ—à–∏—Ç—å"], [false, "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å"]]
},{
	pref: ["privacy.resistFingerprinting", "–ò–∑–æ–ª—è—Ü–∏—è Firstparty-Fingerprint",,"privacy.firstparty.isolate\n\n–ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∞–∫–∂–µ\n–∑–∞–ø—Ä–µ—â–∞–µ—Ç –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞"], Def3el: false,
	keys: [[true, "–î–∞",,"–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª–µ–∂–∫–∏",`Pref('privacy.firstparty.isolate', true)`], [false, "–ù–µ—Ç",,,`Pref('privacy.firstparty.isolate',false)`]]
},(()=>{
if(parseInt(F.ver) > 114) return { //–Ω–æ–≤—ã–π FF
	pref: ["browser.translations.enable", "–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Å–∞–π—Ç–æ–≤"], Def3el: true, Gray: false, refresh: true,
	keys: [[true, "–î–∞"], [false, "–û—Ç–∫–ª",,,`Status('–ü–µ—Ä–µ–≤–æ–¥ –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–æ–∫')`]]
}; else return {
	pref: ["media.peerconnection.enabled", "WebRTC –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π IP"], Def3el: false,
	keys: [[true, "–í—ã–¥–∞—Ç—å"], [false, "–°–∫—Ä—ã—Ç—å"]]
}})(),null,{
	pref: ["network.http.sendRefererHeader", "Referer: –¥–ª—è —á–µ–≥–æ"], Def3el: 2, Yellow: 1,
	keys: [[0, "–ù–∏ –¥–ª—è —á–µ–≥–æ", "0"], [1, "–¢–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏", "1"], [2, "–°—Å—ã–ª–∫–∏, –≥—Ä–∞—Ñ–∏–∫–∞", "2"]]
},{
	pref: ["browser.cache.disk.capacity", "–ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞",,`\n${F.Y}:\n–î–∏—Å–∫ –∏ –ø–∞–º—è—Ç—å: 5120\n—Ç–æ–ª—å–∫–æ –ü–∞–º—è—Ç—å: -1`,,`[[F.U,true],[F.V,true],[F.W,true]].map((a)=>{Pref(...a)})`],
	Def3el: 1048576, Yellow: 0, Gray: 5e5, Blue: 25e4, restart: true,
	keys: [[5e5, F.m,,"500 –ú–± –∞–≤—Ç–æ—Ä–∞–∑–º–µ—Ä"],
	[1048576, "–î–∏—Å–∫ –∏ –ü–∞–º—è—Ç—å",,,`Pref(F.Y, 5120)`],
	[0, "—Ç–æ–ª—å–∫–æ –ü–∞–º—è—Ç—å",,,`[[F.V,false], [F.Y,-1]].map((a)=>{Pref(...a)})`],
	[2097152, "—Ç–æ–ª—å–∫–æ –î–∏—Å–∫",,,`Pref(F.U,false)`],
	[25e4, "250 –ú–± –Ω–∞ –¥–∏—Å–∫–µ",,"–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞",`Pref(F.W,false)`],
	[1000000, "1 –ì–± –º–∞–∫—Å–∏–º—É–º",,,`Pref(F.W,false)`]]
},{
	pref: ["browser.sessionstore.interval", "–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π",,"–ë—Ä–∞—É–∑–µ—Ä —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç —Å–µ—Å—Å–∏–∏ –Ω–∞\n—Å–ª—É—á–∞–π —Å–±–æ—è, —Å–Ω–∏–∂–∞—è —Ä–µ—Å—É—Ä—Å SSD"], Gray: 15e3, Def3el: 6e4, Blue: 3e5, Yellow: 9e5,
	keys: [[15e3, "15 —Å–µ–∫"], [6e4, "1 –º–∏–Ω"], [3e5, "5 –º–∏–Ω"], [9e5, "15 –º–∏–Ω"], [18e5, "30 –º–∏–Ω"]]
},{
	pref: [F.z, "User Agent",,"–ò–∑–º–µ–Ω—è–µ—Ç –≤–∏–¥ —Å–∞–π—Ç–æ–≤", [ua(true),"–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π"]],
		refresh: true, Def3el: ua(true), Yellow: F.G + F.H,
	keys: [
	[ua(0, F.z +"_my"), F.g,,,,F.z +"_my"], //alt-–∫–ª—é—á
	[F.G + F.H,"Yandex MacOS"],
	["Opera/9.80 (Windows NT 6.2; Win64; x64) Presto/2.12 Version/12.16", "Opera12 W8"],
	[F.G +"Windows; U; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)", "MSIE 6.0 Windows"],
	[F.G +"PlayStation 4 3.11) AppleWebKit/537.73 (KHTML, like Gecko)", "Playstation 4"],
	[F.G +"compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; SAMSUNG; GT-I8350)", "Windows Phone"],
	[F.G +"compatible; Googlebot/2.1; +http://www.google.com/bot.html)", "GoogleBot"],
	[ua(true), F.m]] //—à—Ç–∞—Ç–Ω—ã–π –Æ–∑–µ—Ä–ê–≥–µ–Ω—Ç
}],

Over = { //–∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–¥ –º—ã—à—å—é
get [F.P](){ //PanelUI delete this[‚Ä¶];
	mode_skin(); if(Pref("signon.rememberSignons"))
		Services.cache2.asyncGetDiskConsumption({onNetworkCacheDiskConsumption(bytes){
			Status(F.h + formatBytes(bytes),3e3) //–≤—ã–≤–æ–¥ –æ–±—ä—ë–º–∞ –∫—ç—à–∞
		}, QueryInterface: ChromeUtils.generateQI(["nsISupportsWeakReference","nsICacheStorageConsumptionObserver"])})
	else Status(F.i,2e3); //–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏
	return tExp(F.P);
},
get [F.B](){
	var trg = window.event?.target; //get –∏—Å–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥
	trg.tooltipText = trg.label;
},
get [F.B +"s"](){
	var trg = window.event?.target;
	trg.tooltipText = Tag[F.B] +'\n¬± –∫–æ–ª—ë—Å–∏–∫–æ	–ø–µ—Ä–µ–±–æ—Ä –≤–∫–ª–∞–¥–æ–∫';
},
get [F.C](){ //newtab
	return GetDynamicShortcutTooltipText(F.C) + Tag[F.C] +'\n\n'+ Tag[F.B];
},
get [F.D](){var dw = UcfGlob.dirGet("DfltDwnld", 1);
	if(dw) Status(`${Pref(F.v) > 1 ? "\u{26A1} –ì—Ä–∞—Ñ–∏–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞," : "üíæ –ø–∞–ø–∫–∞"} –ó–∞–≥—Ä—É–∑–∫–∏: `+ crop(dw, 96,''));
	return GetDynamicShortcutTooltipText(F.D) +"\n"+ tExp(F.D);
},
get [F.N](){ mode_skin('');
	return GetDynamicShortcutTooltipText(F.N) +"\n\n"+ Tag[F.N] +"\n"+ tExp("wheel-stop");
},
get "stop-button"(){return GetDynamicShortcutTooltipText("stop-button") +"\n"+ tExp("wheel-stop");
},
get "urlbar-input"(){Status("–û—á–∏—Å—Ç–∏—Ç—å –ø–∞–Ω–µ–ª—å –∫–æ–ª—ë—Å–∏–∫–æ–º –º—ã—à–∏",2500)}, //tab
[F.L]: Tag[F.L], "appMenu-print-button2": Tag[F.L], //print
get [F[1]](){ //title-close
	Status("–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫: –°–≤–µ—Ä–Ω—É—Ç—å, –∫–æ–ª—ë—Å–∏–∫–æ: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É",3e3); Tag[F[0]];
}, 
get [F.T](){
	var t = `${Pref("dom.disable_open_during_load") ? "–ó–∞–ø—Ä–µ—Ç" : "‚ÜØ –†–∞–∑—Ä–µ—à"}–∏—Ç—å –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞`;
	if(!Pref("places.history.enabled")) t = F.j;
	if(Pref("privacy.sanitize.sanitizeOnShutdown")) t = F.k;
	Status(t,3e3); return tooltip();
},
get "identity-icon-box"(){ //custom hint
	return tooltip_x(window.event.target, tExp(F.I) + br_val());
},
get [F.I](){Status(this.BrExp(),2500)},
get [F.O](){Status(this.BrExp(),2500); //—â–∏—Ç
	return tooltip_x(window.event.target, tExp(F.O) + br_val());
},
get [F.Q](){
	var trg = window.event?.target;
	if(trg.id == F.Q)
		zoom(0,0,0,`, ${Pref("browser.tabs.loadInBackground") ? "–ù–µ –≤—ã–±–∏—Ä–∞—Ç—å" : "–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –≤"} –Ω–æ–≤—ã–µ –≤–∫–ª–∞–¥–∫–∏`)
	else if (trg.id)
			Status(F.c,9e3);
	try {trg.mstate = trg.config.state + trg.menupopup.state;} catch{} //SetupMenu
	if(!/open/.test(trg.mstate))
		return tExp(F.Q)
	else trg.tooltipText = "";
},
get [F.M](){ //reader
	return GetDynamicShortcutTooltipText(F.M) +"\n"+ Tag[F.M] + br_val();
},
get [F.A + F.K](){ //ReaderView
	return Tag["ReaderView"] + Tag[F.M] + br_val();
},
get SessionManager(){Status("–ü–µ—Ä–∏–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –≤ –º–µ–Ω—é ¬´–ë—ã—Å—Ç—Ä—ã–µ –æ–ø—Ü–∏–∏¬ª");},
get [F.E](){
	this.clipboard; return Tag[F.E] + F.p;
},
get "add-ons-button"(){this.clipboard; var s = Tag[F.E];
	return tooltip(window.event.target, s.replace(s.split("\n", 1),"") + F.p);
},
get [F.R](){return Tag[F.R] + F.p;
},
get [F[2]](){ //zoompage
	return tooltip_x(window.event.target,"‚©â –†–æ–ª–∏–∫ ¬±	–ò–∑–º–µ–Ω–∏—Ç—å –º–∞—Å—à—Ç–∞–±");
}, get [F[3]](){return Over[F[2]]},
[F[4]]: F.n, [F[5]]: F.n, //SingleFile
[F[6]]: F.o, [F[7]]: F.o, //VDH
BrExp(t = F.l + br_val()){
	return t +` ${Exp() ? "–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π" : "–ü—Ä–æ—Å—Ç–æ–π"} —Ä–µ–∂–∏–º –∫–Ω–æ–ø–æ–∫`},
get clipboard(){
	Status("üìã "+ readFromClip().replace(/[\r?\n?]|\s+/g,' ').trim(),3e3);}
};

((obj,del,re) => { //–ø–∞—Ä—Å–∏–Ω–≥ –±–ª–æ–∫–∞ –∫–ª–∞–≤–∏—à —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–∂–∞—Ç–∏–π
	for(var p in Keys)
		F.reos.test(p) && del.add(p.endsWith(F.os) ? p.slice(0, -F.os.length -1) : p);
	for(var p in Keys) del.has(Keys[p]) && del.add(p);
	for(var d of del) delete Keys[d]; //–µ—Å—Ç—å Key_OS ? —É–¥–∞–ª–∏—Ç—å –∏–º–µ–Ω–∞-–∫–ª–æ–Ω—ã
	for(var p in Keys) if (F.reos.test(p)) //—É–±—Ä–∞—Ç—å –∏–º—è –≤–∞—à–µ–π –û–° –∏–∑ —Å–≤–æ–π—Å—Ç–≤–∞
		Keys[p.replace(F.reos,'')] = Keys[p], delete Keys[p];
	for(var p in Keys){var func = Keys[p]; //(){‚Ä¶}, bool,num
		if(typeof func == "string") func = Keys[func]; //—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é
		var [key,mod] = p.split("_"); mod ||= "";
		var upper = key[0].toUpperCase(); var prevent = key[0] == upper;
		var [, m,i] = mod.match(re); m ||= 0; //modifiers bitmap
		var arr = [func,prevent, i ? i == "I" ? 0 : 1 : -1]; //textfields flag –ò–º—è_i 1 –∫—Ä–æ–º–µ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
		var prop = prevent ? key : upper + key.slice(1); //–∏–º—è –±–µ–∑ mod
		var o = obj[prop] || (obj[prop] = Object.create(null));
		o[m] ? o[m].push(arr) : o[m] = [arr]; //–∏–º—è —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π: Skip preventDefault
	}; Keys = obj;})(Object.create(null),new Set(),/(\d+)?(i)?/i);

var Debug = (e,id = "sidebar-box") => {
	if(prefs.getBoolPref(F.u +'info',false)) return true;
	return !document.getElementById(id).hidden;
},
keydown_win = e => { //–ø–µ—Ä–µ—Ö–≤–∞—Ç –∫–ª–∞–≤–∏—à, —É—á–∏—Ç—ã–≤–∞—è –ø–æ–ª—è –≤–≤–æ–¥–∞
	if (e.repeat) return; //–≤—ã–∫–ª—é—á–∏—Ç—å
	var KB = Keys[e.code]?.[e.metaKey*8 + e.ctrlKey*4 + e.shiftKey*2 + e.altKey];
	if(KB) //–µ—Å—Ç—å HotKey
		for(var [func,p,i] of KB)
			if(i ^ docShell.isCommandEnabled("cmd_insertText"))
				p && e.preventDefault(), func(e, gBrowser.selectedTab); //–∑–∞–ø—É—Å–∫ –ø–æ —Å–æ—á–µ—Ç–∞–Ω–∏—é
	Debug() && //–ø–æ–∫–∞–∑ –∫–ª–∞–≤–∏—à
		console.log('‚ñ† key '+ e.code + ('_'+ (e.metaKey*8 + e.ctrlKey*4 + e.shiftKey*2 + e.altKey)).replace('_0',''));
},
listener = { //–¥–µ–π—Å—Ç–≤–∏—è –º—ã—à–∏, –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
	handleEvent(e){
		if(this.skip || e.detail > 1) return;
		var trg = e.target, id = trg.id || trg.className; //trg.tagName;
		if(trg.id) Last = trg;
		if(e.type == "mouseenter"){
			var hint = Over[id] || Over[(trg = trg.parentNode).id];
			if(hint) trg.tooltipText = hint; return; //update
		}
		var sels = this.selectors.filter(this.filter, trg); //#id
		var {length} = sels; if (!length) return;
		var wheel = e.type.startsWith("w");
		var num = e.metaKey*64 + e.ctrlKey*32 + e.shiftKey*16 + e.altKey*8 + (wheel ? 2 : e.button*128);
		var obj = Mus[
			length > 1 && sels.find(this.find,num) || sels[0]
		];
		Debug() && console.log('‚ñ† but ¬´'+ id +'¬ª key '+ num); //wheel –¥–≤–∞–∂–¥—ã
		if(wheel) return obj[num]?.(trg, e.deltaY < 0);
// mousedown
		if(e.type.startsWith("m")){
			obj.mousedownTarget && this.stop(e);
			this.longPress = false; //+–∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º –∫–ª–∏–∫–µ
			if(++num in obj)
				this.mousedownTID = setTimeout(this.onLongPress, 333, trg,obj,num);
			if(e.button == 2)
				this.ctx = trg.getAttribute("context"), trg.setAttribute("context","");
			return;
		}
		obj.mousedownTarget || this.stop(e);	//click
		if(this.longPress) return this.longPress = false;
		this.mousedownTID &&= clearTimeout(this.mousedownTID);
		if(!obj[num]){
			if(e.button == 1) return;
			if(e.button){
				num = "context";
				for(var p in this.a) this.a[p] = e[p];
			} else
				num = "dispatch", this.mdt = obj.mousedownTarget;
			obj = this;
		}
		obj[num](trg, num); //Click
	},
	find(sel){ //—É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞ ?
		return Mus[sel][this] || Mus[sel][this + 1];
	},
	filter(sel){return this.closest(sel); //—Ä–æ–¥–∏—Ç–µ–ª—å
	},
	get selectors(){
		this.onLongPress = (trg,obj,num) => {
			this.mousedownTID = null;
			this.longPress = true;
			obj[num](trg, num); //LongClick
		}
		delete this.selectors;
		return this.selectors = Object.keys(Mus);
	},
	get mdEvent(){
		delete this.mdEvent;
		return this.mdEvent = new MouseEvent("mousedown", {bubbles: true});
	},
	context(trg){
		this.ctx ? trg.setAttribute("context",this.ctx) : trg.removeAttribute("context");
		trg.dispatchEvent(new MouseEvent("contextmenu",this.a));
	},
	dispatch(trg){
		this.skip = true;
		this.mdt ? trg.dispatchEvent(this.mdEvent) : trg.click();
		this.skip = false;
	},
	stop: e => {
		e.preventDefault(); e.stopImmediatePropagation();
	},
	a: {__proto__: null,bubbles: true,screenX: 0,screenY: 0}
},
events = ["click","mousedown","mouseenter","wheel"], //–ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π –¥–ª—è id:
els = document.querySelectorAll("#navigator-toolbox,#ucf-additional-vertical-bar,#appMenu-popup,#widget-overflow-mainView");
for(var el of els) for(var type of events) el.addEventListener(type,listener,true);
window.addEventListener("keydown",keydown_win,true);
ucf_custom_script_win.unloadlisteners.push(F.id);
ucf_custom_script_win[F.id] = {destructor(){
	window.removeEventListener("keydown",keydown_win);
	for(var el of els) for(var type of events) el.removeEventListener(type,listener,true);
}};
var addDestructor = nextDestructor => { //–¥–ª—è saveSelToTxt
	var {destructor} = ucf_custom_script_win[F.id];
	ucf_custom_script_win[F.id].destructor = () => {
		try {destructor();} catch(ex){Cu.reportError(ex)}
		nextDestructor();
}},
mode_skin = (txt,t,s = 'unset',o = '') => {setTimeout(()=>{ //–æ–ø—Ü–∏–∏ FF –º–µ–Ω—è—é—Ç –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–Ω–æ–ø–æ–∫
	var p = Pref(F.x), z = s; UcfGlob.Flash(F.O,p == 2 ? "magenta" : s,0,-1);
	UcfGlob.Flash(F.D,0, Pref(F.v) > 1 ? 'hue-rotate(180deg) drop-shadow(0px 0.5px 0px #F68)' : 'none',-1);
	if(Pref("dom.security.https_only_mode")) z = 'drop-shadow(0px 0.5px 0px #F8F)', o = ', —Ç–æ–ª—å–∫–æ HTTPS'
	UcfGlob.Flash(F.N,0,z,-1); t = [s,'–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ - —Å–∏—Å—Ç–µ–º–Ω—ã–µ'];
	if(p == 0) t = ['saturate(0%) brightness(0.93)','–°–µ—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–∫—Å–∏'];
	else if(p == 1) t = ['sepia(100%) saturate(300%) brightness(0.9)', '–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏'];
	else if(p == 2) t = ['hue-rotate(120deg)',F.d], s = 'hue-rotate(270deg) brightness(95%)'; //—Ñ–æ–Ω PanelUI
	else if(p == 4) t = ['hue-rotate(250deg) saturate(150%)','–°–µ—Ç—å - –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏'];
	UcfGlob.Flash(F.P,0,t[0],-1), UcfGlob.Flash(F.Q,0,s,-1); 
	if(ua() && (ua() != ua(true))) o = o +', —á—É–∂–æ–π –Æ–∑–µ—Ä–ê–≥–µ–Ω—Ç';
	z = Pref("network.proxy.no_proxies_on") ? ' + —Å–∞–π—Ç—ã-–∏—Å–∫–ª—é—á–µ–Ω–∏—è' : '';
	typeof txt == "string" && Status(txt || "\u{26A1}"+ t[1] + z + o,5e3);},250)
}
mode_skin(); [['ui.prefersReducedMotion',0],['browser.download.alwaysOpenPanel',false], //animation Fix
['browser.download.autohideButton',false]].forEach((p)=>Pref(...p)); //lockPref –æ–ø—Ü–∏–π
getIntPref = (p) => prefs.getIntPref(p,100),
tabr = F.u +"opacity",url = `resource://${tabr}/`, //bright tabs
sss = Cc["@mozilla.org/content/style-sheet-service;1"].getService(Ci.nsIStyleSheetService),
css = `@-moz-document url(chrome://browser/content/browser.xhtml){
	:is(${F.id})[rst] {filter: grayscale(1%) !important}
	:root:not([chromehidden*=toolbar]) #tabbrowser-tabbox {background-color: black !important}
	:root:not([chromehidden*=toolbar]) #tabbrowser-tabpanels {opacity:${getIntPref(tabr)/100} !important}}`;
io.getProtocolHandler("resource").QueryInterface(Ci.nsIResProtocolHandler)
	.setSubstitution(tabr,io.newURI("data:text/css,"+ encodeURIComponent(css)));
sss.loadAndRegisterSheet(io.newURI(url),sss.USER_SHEET);
var st = InspectorUtils.getAllStyleSheets(document).find(s => s.href == url).cssRules[0].cssRules[2].style;
var observer = () => st.setProperty("opacity", getIntPref(tabr)/100,"important");
prefs.addObserver(tabr,observer);
this.removePrefObs = () => prefs.removeObserver(tabr,observer); //end bright

function BrowserEx(){
	let args = [...arguments], b = args.shift();
	eval(`${parseInt(Services.appinfo.version) < 126
		? "Browser"+ b[0].toUpperCase() + b.slice(1)
		: "BrowserCommands."+ b}(...args)`);
}
var css_USER = css => { //–ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
	var style = UcfGlob.FileOk(css) ? io.newURI(css) : makeURI('data:text/css;charset=utf-8,'+ encodeURIComponent(css));
	var args = [style,sss.USER_SHEET]; //—Å—Ç–∏–ª—å: —Ñ–∞–π–ª –∏–ª–∏ CSS
	(this.css = !this.css) ? sss.loadAndRegisterSheet(...args) : sss.unregisterSheet(...args);
},
gClipboard = {write(str,ch = Cc["@mozilla.org/widget/clipboardhelper;1"].getService(Ci.nsIClipboardHelper)){
		(this.write = str => ch.copyStringToClipboard(str,Services.clipboard.kGlobalClipboard))(str);}
},
readFromClip = ({clipboard} = Services, data = {}) => {
	try {let trans = Cc["@mozilla.org/widget/transferable;1"].createInstance(Ci.nsITransferable),
		flavor = `text/${parseInt(Services.appinfo.platformVersion) >= 111 ? "plain" : "unicode"}`;
		trans.init(docShell.QueryInterface(Ci.nsILoadContext));
		trans.addDataFlavor(flavor);
		clipboard.getData(trans, clipboard.kGlobalClipboard);
		trans.getTransferData(flavor, data);
		if (data.value)
			return data.value.QueryInterface(Ci.nsISupportsString).data;
	} catch {return ""}
},
crop = (z = "",cut = 30,ch = '‚Ä¶\n') => { //–æ–±—Ä–µ–∑–∞—Ç—å/—Ä–∞–∑–±–∏—Ç—å —Ç–µ–∫—Å—Ç
	var e = z.substring(cut).slice(-cut);
	return z.substring(0,cut) + (e ? ch +"‚Ä¶"+ e : "");
},
hints = new Map([ //–æ–ø—Ü–∏—è Setup –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ? –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É
	[F.u +"savedirs", crop(UcfGlob.dirGet("DfltDwnld", 1),33)], [F.z, ua(true)]]),
TabAct = e => {return e.closest(".tabbrowser-tab");
},
toTab = (url = 'about:support', go) =>{ //–æ—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É | –∑–∞–∫—Ä—ã—Ç—å –µ—ë | –≤—ã–±—Ä–∞—Ç—å
	for(var tab of gBrowser.visibleTabs)
		if(tab.linkedBrowser.currentURI.spec == url)
			{go ? gBrowser.selectedTab = tab : gBrowser.removeTab(tab); return;}
		gBrowser.addTrustedTab(url);
		gBrowser.selectedTab = gBrowser.visibleTabs[gBrowser.selectedTab._tPos +1];
},
Title = n => {try {return UcfGlob.TitlePath(n)[3];}
	catch {return document.title || gBrowser.selectedTab.label}
},
aboutCfg = (filter, win = window) => { //–Ω–∞ –æ–ø—Ü–∏—é
	var setFilter = (e, wnd, input = (e?.target || wnd.content.document).getElementById("about-config-search")) => {try {
		if(e || input.value != filter) input.setUserInput(filter);} catch{}},
	found = win.switchToTabHavingURI("about:config", true, {relatedToCurrent: true,
		triggeringPrincipal: Services.scriptSecurityManager.getSystemPrincipal()});
	if (found) setFilter(null, win);
	else gBrowser.selectedBrowser.addEventListener("pageshow", setFilter, {once: true});
},
saveSelToTxt = async () => { //–≤ .txt –í—Å—ë –∏–ª–∏ –í—ã–±—Ä–∞–Ω–Ω–æ–µ
	var {length} = saveURL, splice = length > 9, l11 = length == 11, msgName = F.id + ":Save:GetSelection"; //FIX FF103+
	var receiver = msg => {var txt = "data:text/plain,"+ encodeURIComponent(gBrowser.currentURI.spec +"\n\n"+ msg.data);
		var args = [txt, Title() +'.txt',null,false,true,null,window.document];
		splice && args.splice(5,0,null) && l11 && args.splice(1,0,null);
		saveURL(...args);
		Status(crop("‚àö —Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: "+ Title(),48,''));
	}
	messageManager.addMessageListener(msgName,receiver);
	addDestructor(() => messageManager.removeMessageListener(msgName,receiver));
	var sfunc = fm => {
		var res,fed,win = {},fe = fm.getFocusedElementForWindow(content,true,win);
		var sel = (win = win.value).getSelection();
		if (sel.isCollapsed){
			var ed = fe && fe.editor;
			if (ed && ed instanceof Ci.nsIEditor)
				sel = ed.selection, fed = fe;
		}
		if(sel.isCollapsed)
			fed && fed.blur(),docShell.doCommand("cmd_selectAll"),
			res = win.getSelection().toString(),docShell.doCommand("cmd_selectNone"),
			fed && fed.focus();
		res = res || sel.toString();
		/\S/.test(res) && sendAsyncMessage("saveSelToTxt",res);
	}
	var url = "data:;charset=utf-8,"+ encodeURIComponent(`(${sfunc})`.replace("saveSelToTxt",msgName)) +'(Cc["@mozilla.org/focus-manager;1"].getService(Ci.nsIFocusManager));';
	(saveSelToTxt = () => gBrowser.selectedBrowser.messageManager.loadFrameScript(url,false))();
},
HTML = (sfile = document.getElementById(F[4])) => { //addon SingleFile
	try {UcfGlob.SingleHTML(true,window);
	} catch {sfile && sfile.click();}
},
tooltip = (id = document.getElementById(F.T), s = "\n‚ó® –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫: –ë–µ–∑ –∑–∞–ø—Ä–æ—Å–∞") => {
	if(id && id.tooltipText.indexOf(s) == -1)
		return id.tooltipText + s;
},
tooltip_x = (trg,text = "", ttt = "") => {
	if(!trg.id.endsWith("x")){ //box
		ttt = (trg.hasAttribute("tooltiptext")) ? trg.ttt = trg.tooltipText : trg.ttt;
		if(ttt && ttt.indexOf(text) == -1) ttt += "\n\n";
		trg.removeAttribute("tooltiptext");
	}
	return (ttt.indexOf(text) == -1) ? ttt + text : ttt;
},
bright = (trg,forward,step = 1,val) => { //wheel
	val ||= getIntPref(tabr) + (forward ? step : -step);
	val = val > 100 ? 100 : val < 15 ? 15 : val;
	Pref(tabr,val); trg.toggleAttribute("rst"); Status(F.l + val +"%",1e3);
},
br_val = () => Pref([tabr,100]) +"%",
zoom = (forward,toggle = false, change = true,text = '') => {
	toggle ? ZoomManager.toggleZoom() : change ? forward ? FullZoom.enlarge() : FullZoom.reduce() : 0;
	Status("¬± –ú–∞—Å—à—Ç–∞–± "+ Math.round(ZoomManager.zoom*100) +`%${Pref("browser.zoom.full") ? "" : " (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)"}` + text,3e3);
},
formatBytes = (b = 0,d = 1) => { //–æ–±—ä—ë–º –±–∞–π—Ç‚Ä¶–¢–±
	let i = Math.log2(b)/10|0; return parseFloat((b/1024**(i=i<=0?0:i)).toFixed(d))+`${i>0?'KMGT'[i-1]:''}b`;
},
Expert = (m = Boolean(Exp()), p = F.u +'expert') => {
	Pref(p,!m); Status(Over.BrExp(""),3e3);
},
Help = (help = F.s +"help.html") => { //–ø–æ–º–æ—â—å
	(UcfGlob.FileOk(help)) ? toTab(help) : toTab(F.J);
},
userjs = (e,myjs = F.s +"custom_scripts/User.js") => {
	Debug() && document.getElementById("key_browserConsole").doCommand(); //—Ñ–æ–∫—É—Å –Ω–∞ –∫–æ–Ω—Å–æ–ª—å
	UcfGlob.FileOk(myjs) ? eval(Cu.readUTF8URI(io.newURI(myjs))) : console.error(F.q + myjs); //–≤–∞—à —Å–∫—Ä–∏–ø—Ç
},
Icon = (c = '0c0')=>"data:image/svg+xml;charset=utf-8,<svg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='a' x1='16' x2='16' y1='32' gradientUnits='userSpaceOnUse'><stop stop-color='%23"+ c +"'/><stop stop-color='%23fff' offset='.8'/></linearGradient><linearGradient id='b' x2='32' y1='16' gradientTransform='matrix(1 0 0 1 2 2)'><stop stop-opacity='.5'/></linearGradient></defs><circle cx='16' cy='16' r='15' fill='url(%23a)' stroke='url(%23b)' stroke-width='2'/></svg>",
Translate = (brMM = gBrowser.selectedBrowser.messageManager) => { //–ø–µ—Ä–µ–≤–æ–¥ —Å–∞–π—Ç | –≤—ã–¥–µ–ª. —Ç–µ–∫—Å—Ç
	brMM.addMessageListener('getSelect',listener = (msg) =>{
		if(msg.data) //–≤—ã–¥–µ–ª–µ–Ω–æ
			toTab("https://translate.google.com/#view=home&op=translate&sl=auto&tl=ru&text="+ msg.data,true)
		else
			toTab("https://translate.yandex.com/translate?url="+ gURLBar.value +"&dir=&ui=ru&lang=auto-ru",true);
	brMM.removeMessageListener('getSelect',listener,true);
	});
	brMM.loadFrameScript('data:,sendAsyncMessage("getSelect",content.document.getSelection().toString())',false);
},
Dialog = async(url = "preferences/dialogs/connection.xhtml", w = "_blank") =>{
	var win = Services.wm.getMostRecentWindow(w);
	try {win.focus();} catch {
		win = window.openDialog("chrome://browser/content/"+ url, w, "chrome,dialog=no,centerscreen,resizable");
		win.addEventListener("DOMContentLoaded",() =>{win.document.documentElement.setAttribute("windowtype",w)},{once: true});
		await new Promise(resolve => win.windowRoot.addEventListener("DOMContentLoaded", resolve, {once: true}));
	}; return win;
},
CfgProxy = async() =>{var win = await Dialog(); win.opener = window; win.opener.gSubDialog = {_dialogs: []};
},
UCF = (p = "user_chrome") => {if (!UcfGlob.FileOk(F.s + p +"/prefs.xhtml")) p = "options";
	window.switchToTabHavingURI(F.s + p +"/prefs.xhtml",true,{relatedToCurrent: true,triggeringPrincipal: Services.scriptSecurityManager.getSystemPrincipal()});
},
Cookies = async() =>{var uri = window.gBrowser.selectedBrowser.currentURI;
	try {var tld = Services.eTLD.getBaseDomain(uri);} catch {var tld = uri.asciiHost}
	var sb = (await Dialog("preferences/dialogs/siteDataSettings.xhtml", "Browser:SiteDataSettings")).document.querySelector("#searchBox");
	sb.inputField.setUserInput(tld);
	await window.SiteDataManager.updateSites();
	setTimeout(() => sb.editor.selection.collapseToEnd(), 50);
},
switchProxy = (pac = F.w) => {
	var t = F.x,u = F.y;
	if(Pref(t) != 2) //–≤—ã–∫–ª—é—á–∏—Ç—å
		Pref(t,2), Pref(u,pac)
	else
		Pref(t,5), Pref(u,"localhost");
	mode_skin(); //—Ä–∞–∑–Ω—ã–π —Ñ–æ–Ω –∑–∞–º–∫–∞ –¥–ª—è –ü—Ä–æ–∫—Å–∏
	BrowserEx("reload");
},
FavItem = (end = false,def_url = 'ua.ru', s = 0,m = 1)=>{ //first|last url –ú–µ–Ω—é –∑–∞–∫–ª–∞–¥–æ–∫
	var query = {}, options = {}, guid = PlacesUtils.bookmarks.menuGuid;
	PlacesUtils.history.queryStringToQuery(`place:parent=${guid}&excludeQueries=1`,query,options);
	var folder = PlacesUtils.history.executeQuery(query.value, options.value).root;
	folder.containerOpen = true;
	var max = folder.childCount -1, type = Ci.nsINavHistoryResultNode.RESULT_TYPE_URI;
	if(end) s = max, m = -1;
	for(var ind = s; end ? 0 <= ind : ind <= max; ind = ind + m){
		var node = folder.getChild(ind);
		if(node.type == type) return node.uri;
	}; return def_url;
},
toFav = () => {with (PlacesUtils.bookmarks){ //–±–µ–∑ –¥–∏–∞–ª–æ–≥–∞
	var url = gBrowser.selectedBrowser.currentURI.spec;
	search({url}).then(async array => {
		if(array.length)
			try {await remove(array);} catch {}
		else
			try {await insert({
				url: io.newURI(url),
				title: (gBrowser.contentTitle || gBrowser.selectedTab.label || url),
				parentGuid: [() => toolbarGuid, () => menuGuid, () => unfiledGuid][prefs.getIntPref("bookmarksparentguid",0)](),
				index: DEFAULT_INDEX
			});} catch {}
	});
}}

if(F.os == "macosx") Object.keys(Tag).forEach((k)=>{ //i —Å—á—ë—Ç—á–∏–∫, –∑–∞–º–µ–Ω–∞ –±—É–∫–≤
	['‚óâ','√ò'].forEach((c,i)=>{Tag[k] = Tag[k].replace(new RegExp(c,'g'),
	['‚¶ø','‚óé'][i])})})
else if (Pref([F.u +'mystyle',false]))
	css_USER(F.s +"custom_styles/win_buttons-vitv.css")
else
	css_USER('.titlebar-buttonbox {display: none !important}');

//+ –∫–Ω–æ–ø–∫–∏
if(!prefs.getStringPref("browser.uiCustomization.state").includes(`"${F.E}"`))
	await delayedStartupPromise;
var s = document.getElementById(F.E); s?.setAttribute("removable", true); //unlock unified-extensions-button
s && document.getElementById("nav-bar-customization-target").append(s);

CustomizableUI.getWidget(F.F)?.label || CustomizableUI.createWidget({label:`–ü–∞–Ω–µ–ª–∏, –ü–∞–ø–∫–∏`,id: F.F,tooltiptext: Tag[F.F],
	onCreated(btn){btn.style.setProperty("list-style-image",`url(${F.dir})`)}
})

if(UcfGlob.FileOk(F.as)) CustomizableUI.getWidget(F.R)?.label || CustomizableUI.createWidget({
	label:F.R.replace('-',' '), id:F.R, defaultArea: CustomizableUI.AREA_NAVBAR, localized: false,
	onCreated(btn){btn.setAttribute("image", F.ai);
		btn.onmouseenter = btn.onmouseleave = this.onmouse;
		btn.setAttribute("oncommand","handleCommand(this)"); btn.handleCommand = this.handleCommand;
	},
	onmouse: e => e.target.focusedWindow = e.type.endsWith("r") && Services.wm.getMostRecentWindow(null),
	get handleCommand(){delete this.handleCommand;
		return this.handleCommand = btn => {(btn.handleCommand = new btn.ownerGlobal.Function(this.code).bind(btn))();}
	},
	get code(){delete this.code;
		try {var c = 'this.focusedWindow && this.focusedWindow.focus();\n'+
			Cu.readUTF8URI(io.newURI(F.as))} catch {c = `console.error(F.q + ${F.as})`}
		return this.code = c;}
});

(async id => {with (document)
	getElementById(F.O).removeAttribute("tooltip"), getElementById("nav-bar").tooltip = F.id; //script OK

CustomizableUI.getWidget(id)?.label || (self => CustomizableUI.createWidget(self = {id,
	id: id, label: "–ë—ã—Å—Ç—Ä—ã–µ –æ–ø—Ü–∏–∏", localized: false, defaultArea: CustomizableUI.AREA_NAVBAR,
	onCreated(btn){
		btn.setAttribute("image", F.qt); btn.domParent = null;
		var doc = btn.ownerDocument, m = nn => doc.createXULElement(nn);
		this.createPopup(doc, btn, "config", Setup);
		btn.linkedObject = this;
		for(var type of ["contextmenu", "command"])
			btn.setAttribute("on" + type, `linkedObject.${type}(event)`);
		var popup = F.menu = m("menupopup"), menu = m("menuitem"); //UserMenu
		menu.m = m; menu.fill = this.fill; menu.render = this.render;
		popup.append(menu); btn.prepend(popup);
	},
	render(){
		var popup = this.parentNode;
		this.remove();
		this.fill(Menu, popup);
	},
	renderSub(){
		delete this.render;
		this.render();
		this.render = self.updSub;
		this.upd();
	},
	updSub(){
		this.parentNode.state.startsWith("c") || this.upd();
	},
	fill(o, popup) {
		for (key in o){
			var val = o[key];
			if(typeof val != "object") continue;
			var {lab, inf, img, cmd, alt, sep, men, upd, mid} = val;
			sep && popup.append(this.m("menuseparator"));
			var name = men ? "menu" : "menuitem";
			var item = this.m(name); item.className = name;
			item.setAttribute("label", lab || key);
			item.alt = alt; //RClick –≤ ucf_hookClicks.js {Mouse‚Ä¶
			if (inf) item.tooltipText = inf;
			else item.style.setProperty("font-style", "italic", "important");
			if(img || /this\.image.*=/.test(upd))
				item.className = name + "-iconic", item.setAttribute("image", img || F.io +"blocked.svg");
			item.cmd = []; item.cmd[0] = cmd; item.cmd[128] = mid; item.cmd[256] = alt; //–∫–ª–∏–∫–∏ {Mouse‚Ä¶
			popup.append(item);
			if(upd){ //–≤—ã–¥–µ–ª–∏—Ç—å –æ–±–Ω–æ–≤–ª—è–µ–º—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
				item.style.filter = "drop-shadow(0.1px 1px 0.1px #c99)";
				if(item.renderedOnce) (item.render = upd).call(item);
				else item.upd = upd, item.render = self.renderSub;
			}
			men && this.fill(val, item.appendChild(this.m("menupopup")));
		}
	},
	createPopup(doc, btn, prop, data){
		var popup = doc.createXULElement("menupopup");
		btn[prop] = popup;
		popup.id = this.id +"-"+ prop;
		for (var type of ["popupshowing"])
			popup.setAttribute("on"+ type, `parentNode.linkedObject.${type}(event)`);
		for(var obj of data) popup.append(this.createElement(doc, obj));
		btn.append(popup);
	},
	createElement(doc, obj){ //click item
		if(!obj) return doc.createXULElement("menuseparator");
		var pref = doc.ownerGlobal.Object.create(null), node, bool, img;
		for(var [key, val] of Object.entries(obj)){
			if(key == "pref"){
				var [opt, lab, hot, hint, undef, code] = val; //—Å—Ç—Ä–æ–∫–∞ –º–µ–Ω—é
				pref.pref = opt; pref.lab = lab || opt;
				if(hint){
					if(RegExp(/\p{L}/,'u').test(hint[0]) && (hint[0] === hint[0].toUpperCase()))
						hint = '\n'+ hint;
					pref.hint = hint;
				}
				if(undef) pref.undef = undef; //–µ—Å–ª–∏ –Ω–µ –º–∞—Å—Å–∏–≤: undef || undef == ""
				if (code) pref.code = code;
			}
			else if(key == "icon") img = val, pref.img = true;
			else if(key != "keys") pref[key] = val;
			else pref.hasVals = true;
		}
		var t = prefs.getPrefType(pref.pref), m = {b: "Bool", n: "Int", s: "String"}, map, myp;
		var str = m[t == prefs.PREF_INVALID ? obj.keys ? (typeof obj.keys[0][0])[0] : "b" : t == prefs.PREF_BOOL ? "b" : t == prefs.PREF_INT ? "n" : "s"]; //String –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
		pref.get = prefs[`get${str}Pref`], pref.set = prefs[`set${str}Pref`];
		if(pref.hasVals){
			for(var [val,,,,code] of obj.keys)
				code && (map || (map = new Map())).set(val, code);
			if(map) pref.set = (key, val) => {
				prefs[`set${str}Pref`](key, val);
				map.has(val) && eval(map.get(val)); //–∫–æ–¥2 –µ—Å–ª–∏ pref –∏–∑–º–µ–Ω—ë–Ω
			}
		}
		node = doc.createXULElement("menu");
		node.className = "menu-iconic";
		img && node.setAttribute("image", img);
		hot && node.setAttribute("accesskey", hot);
		(node.pref = pref).vals = doc.ownerGlobal.Object.create(null);
		this.createRadios(doc,
			str.startsWith("B") && !pref.hasVals ? [[true, "true"], [false, "false"]] : obj.keys,
			node.appendChild(doc.createXULElement("menupopup")), pref
		);
		return node;
	},
	createRadios(doc, vals, popup, pref){ for(var arr of vals){
		var [val, lab, key, hint,,alt] = arr;
		var menuitem = doc.createXULElement("menuitem");
		with (menuitem)
			setAttribute("type","radio"), setAttribute("closemenu","none"), setAttribute("label", popup.parentNode.pref.vals[val] = lab), key && setAttribute("accesskey", key); menuitem.alt = false;
		var info = (trg, vl, inf) => {
			var tip = trg.val = vl === "" ? F.r : vl;
			if(inf) tip += "\n" + inf;
			trg.tooltipText = `${tip != undefined ? tip +"\n\n" : ""}`+ (
				menuitem.alt ? "–ö–ª–∏–∫ –≤ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –æ—Ç–∫—Ä–æ–µ—Ç –ø—Ä–∞–≤–∫—É –æ–ø—Ü–∏–∏" : F.f);
		}
		if(alt)
			menuitem.opt = alt,
			menuitem.alt = (trg) => {
				delete pref.vals[trg.val];
				try{var k = trg.val = pref.get(trg.opt);} catch{k = trg.val}
				pref.set(trg.opt, k), pref.vals[trg.val] = F.g;
				info(trg, k, trg.hint);	return k;
			}
		menuitem.hint = hint, info(menuitem, val, hint);
		popup.append(menuitem);
	}},
	openPopup(popup){
		var btn = popup.parentNode;
		if(btn.domParent != btn.parentNode){
			btn.domParent = btn.parentNode;
			if(btn.matches(".widget-overflow-list > :scope"))
				var pos = "after_start";
			else var win = btn.ownerGlobal, {width, height, top, bottom, left, right} =
				btn.closest("toolbar").getBoundingClientRect(), pos = width > height
					? `${win.innerHeight - bottom > top ? "after" : "before"}_start`
					: `${win.innerWidth - right > left ? "end" : "start"}_before`;
				btn.config.setAttribute("position", pos);
		}
		popup.openPopup(btn);
	},
	regexpRefresh: /^(?:view-source:)?(?:https?|ftp)/,
	maybeRe(node, fe){ var {pref} = node, win = node.ownerGlobal;
		if("restart" in pref){
			if(UcfGlob.maybeRestart(pref.restart)) return;
		}
		else this.popupshowing(fe, node.parentNode);
		if("refresh" in pref){
			if(this.regexpRefresh.test(win.gBrowser.currentURI.spec))
				pref.refresh ? BrowserEx("reloadSkipCache") : BrowserEx("reload");
		}
	},
	maybeClosePopup(e, trg){
		(e.shiftKey || e.button == 1) || trg.parentNode.hidePopup();
	},
	upd(node){ //–ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
		var {pref} = node, def = false, user = false, val; //–µ—Å–ª–∏ –æ–ø—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
		if(prefs.getPrefType(pref.pref) != prefs.PREF_INVALID){
			try {
				val = pref.defVal = prefs.getDefaultBranch("")[pref.get.name](pref.pref); def = true; //–æ–ø—Ü–∏—è –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª—É—á–µ–Ω–∞
			} catch {def = false}
			user = prefs.prefHasUserValue(pref.pref); //Boolean
			if(user) try {
				val = pref.get(pref.pref, undefined);
			} catch {}
		}
		if(val == pref.val && def == pref.def && user == pref.user) return;
		pref.val = val; pref.def = def; pref.user = user;
		var exists = def || user;
		if(!exists && pref.undef) //–æ–ø—Ü–∏–∏ –Ω–µ—Ç ? –≤–µ—Ä–Ω—É—Ç—å default
			val = pref.undef[0];
		var hint = val != undefined ? val === "" ? F.r : val : "–≠—Ç–∞ –æ–ø—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞";
		hint += "\n" + pref.pref; //–µ—Å–ª–∏ –ø—É—Å—Ç–æ: hints.get(pref.pref);
		if(pref.hint) hint += "\n"+ pref.hint;
		node.tooltipText = hint; //+ —Ç–µ–∫—Å—Ç
		var img = Icon("999"), alt = "Yellow" in pref && val == pref.Yellow, clr = "Gray" in pref && val == pref.Gray, blu = "Blue" in pref && val == pref.Blue;
		if(blu) img = Icon("a0f");
		if(alt) img = Icon("f80");
		if("Def3el" in pref)
			if(val == pref.Def3el)
				img = Icon(), node.style.removeProperty('filter');
			else if (val != pref.defVal){
				if(!alt && !clr && !blu)
					img = Icon("f26"); // Red
				node.style.filter = "drop-shadow(0.1px 1px 0.1px #c99)";
			}
		pref.img || node.setAttribute("image", img); //–Ω–µ—Ç Def3el ? —Å–µ—Ä—ã–π
		user
			? node.style.setProperty("font-style", "italic", "important")
			: node.style.removeProperty("font-style");
		var {lab} = pref;
		if(exists && pref.hasVals){
			if(val in pref.vals)
				var sfx = pref.vals[val] || val;
			else
				var sfx = user ? "–ò–Ω–æ–µ" : F.m;
			lab += ` ${"restart" in pref ? "‚ÜØ-" : "refresh" in pref ? "-‚ü≥" : "‚Äî"} ${sfx}`;
		}
		lab = exists ? lab : '['+ lab + `${"restart" in pref ? " ‚ÜØ" : "refresh" in pref ? " ‚ü≥" : ""}` +']'+ `${pref.undef ? " - "+ pref.undef[1] : ""}`;
		node.setAttribute("label", lab); //–∏–º—è = [–∏–º—è] –µ—Å–ª–∏ –ø—Ä–µ—Ñ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
	},
	popupshowing(e, trg = e.target, checkstate = true){
		if(checkstate && trg.state == "closed") return;
		if(trg.id){
			for(var node of trg.children){
				if(node.nodeName.endsWith("r")) continue;
				this.upd(node);
				!e && node.open && this.popupshowing(null, node.querySelector("menupopup"));
			} return;
		}
		var {pref} = trg.closest("menu"), findChecked = true;
		var findDef = "defVal" in pref;
		var checked = trg.querySelector("[checked]");
		if (checked){
			if(checked.val == pref.val){
				if(findDef) findChecked = false;
				else return;
			}
			else checked.removeAttribute("checked");
		}
		if(findDef){
			var def = trg.querySelector("menuitem:not([style*=font-style]");
			if(def)
				if(def.val == pref.defVal){
					if(findChecked) findDef = false;
					else return;
				}
				else def.style.setProperty("font-style","italic","important");
		}
		for(var node of trg.children) if ("val" in node){

			if(!pref.val && pref.val != "" && pref.undef)
				pref.val = pref.undef[0]; //–æ–ø—Ü–∏–∏ –Ω–µ—Ç ? –≤–µ—Ä–Ω—É—Ç—å default
			if(findChecked && node.val == pref.val){
				node.setAttribute("checked", true);
				if(findDef) findChecked = false;
				else break;
			}
			if(findDef && node.val == pref.defVal){
				node.style.removeProperty("font-style");
				if (findChecked) findDef = false;
				else break;}
		}
	},
	command(e, trg = e.target){ //LMB
		if(trg.btn) return;
		var menu = trg.closest("menu");
		if(!menu || !menu.pref) return;
		var newVal = trg.val;
		if(trg.alt) newVal = trg.alt(trg);
		this.maybeClosePopup(e, menu);
		menu.pref.code && eval(menu.pref.code); //run1
		if(newVal != menu.pref.val){
			menu.pref.set(menu.pref.pref, newVal);
			this.maybeRe(menu, true);
		}
	},
	contextmenu(e){
		var trg = e.target;
		if(!("pref" in trg)) return;
		this.maybeClosePopup(e, trg);
		if(trg.pref.user)
			prefs.clearUserPref(trg.pref.pref), this.maybeRe(trg);
		trg.pref.code && eval(trg.pref.code); //run
	}
}))()})(F.Q);

})
(()=>{ //–ø–µ—Ä–µ–Ω–æ—Å –∫–æ–¥–∞ –≤ –∫–æ–Ω–µ—Ü
var ua = '–ü—Ä–∞–≤—ã–π –∫–ª–∏–∫: –≤–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ "–ó–∞–≥–æ–ª–æ–≤–æ–∫ ‚ïë Java-–∫–æ–¥"\n\n|‚ó® –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –º—ã—à–∏: –≤—Ç–æ—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞|‚ó® –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫: –°–±—Ä–æ—Å ‚óß –û—Ç–∫—Ä—ã—Ç—å –æ–ø—Ü–∏—é ‚ü≥ –û–±–Ω–æ–≤–∏—Ç—å ‚ÜØ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫|–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–∞–π—Ç—ã —á–µ—Ä–µ–∑ VPN|–ó–∞—Ö–≤–∞—Ç —Ü–≤–µ—Ç–∞ –≤ –ë—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞. –ö—É—Ä—Å–æ—Ä: —Å–¥–≤–∏–≥ –Ω–∞ 1 —Ç–æ—á–∫—É|‚óß + Shift, –ö–æ–ª—ë—Å–∏–∫–æ: –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å|–≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ‚Ä¶|üíæ –∫—ç—à, –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–æ–≤, –∫—É–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç |‚ö°Ô∏è –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏|‚ÜØ –ù–µ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–µ—â–µ–Ω–∏–π|‚ÜØ –£–¥–∞–ª—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–µ—â–µ–Ω–∏–π, –∑–∞–∫—Ä—ã–≤–∞—è –±—Ä–∞—É–∑–µ—Ä|‚òÄ –Ø—Ä–∫–æ—Å—Ç—å —Å–∞–π—Ç–æ–≤ |–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é|SingleFile (Alt+Ctrl+S)\n–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∞–π—Ç –≤ –µ–¥–∏–Ω—ã–π Html|Video DownloadHelper\n–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º–æ–≥–æ –≤–∏–¥–µ–æ|\t–æ–ø—Ü–∏–∏ UserChromeFiles\n‚ó® –¥–µ—Ä–∂–∞—Ç—å\t–û—Ç–ª–∞–¥–∫–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π\nAlt + x\t\t–∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ User.js|–û—à–∏–±–∫–∞ —Ñ–∞–π–ª–∞ ‚Äî |[ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ ]|chrome://user_chrome_files/content/|browser.safebrowsing.downloads.remote.block_dangerous|extensions.user_chrome_files.|permissions.default.image|https://p.thenewone.lol:8443/proxy.pac|network.proxy.type|network.proxy.autoconfig_url|general.useragent.override|pageAction-urlbar-|tabbrowser-tab|tabs-newtab-button|downloads-button|unified-extensions-button|favdirs-button|Mozilla/5.0 (|Macintosh; Intel Mac OS X 10.15) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0 YaBrowser/22.5.0.1916 Yowser/2.5 Safari/537.36|identity-box|victor-dobrov.narod.ru/help-FF.html|_2495d258-41e7-4cd5-bc7d-ac15981f064e_|print-button|reader-mode-button|reload-button|tracking-protection-icon-container|PanelUI-menu-button|QuickToggle|Attributes-Inspector|dom.event.clipboardevents.enabled|star-button-box|browser.cache.memory.enable|browser.cache.disk.enable|browser.cache.disk.smart_size.enabled|chrome://browser/skin/canvas-blocked.svg|browser.cache.memory.max_entry_size'.split('|'),
io = "chrome://devtools/skin/images/", F = {Z: io, id: "ucf_hookExpert",
	os: AppConstants.platform, ver: Services.appinfo.version.replace(/-.*/,''),
	tc(m = "‚åò",w = "Ctrl+"){return this.os == "macosx" ? m : w}, reos: /_(?:win|linux|macosx)$/,
	eye: io +"command-eyedropper.svg",
	dir: io +"folder.svg", opt: io +"settings.svg", nul: io +"blocked.svg", //"tool-dom.svg"
	ok: io +"check.svg", no: io +"close.svg", sec: io +"security-state-insecure.svg",
	ai: "data:image/webp;base64,UklGRjwAAABXRUJQVlA4TC8AAAAvD8ADAAoGbSM5Ov6k774XCPFP/0/03/8JGPxzroIzuOW06Ih60Genn1S/gHe+BgA=",
	qt: "data:image/webp;base64,UklGRkYCAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSJcAAAANcGJr25S8mH4SNGxAgsguPCZ0BcMOiDSNRpvVaCTa3AI2qm2e2ofz7OuwgIiYgMzb4kVjGvegnQFAwXgFVnvcOmtnMJtutAa3Vo4mhRMDpWq8AjfU+yQoYf1/oTkTIdUrknKswNQ5yAdDzqgr4CYbsJWQfEyEU5QNEl2eKFM2AAIbjmSIMjwXPGyEdj6Bdn4mj9KO63sAAFZQOCCIAQAAdAgAnQEqGAAYAD6dRppKgoCqgAE4lsAKwgisgG27uzPePSvBIu/Pr0HJqW+AfoAIHl2DrAnRo/G3JBpTx8yE7L6LFQyD+yUNvuRYAAD+7mwmpaoBcsJ1hVKsMI2ucqid8qndm+WEvH4l4il6lA8FPscgnrRHrnSjjyNcfUV21+TkfqOWKou2UvVsZSl1z+jKs760Vij5XCWF9Uo6TZAhKfrJpeILyQYwq2Ee/g1uyEH/dJMI/91DsVpI6i2vV/Jqpd4/KniJtTm1woLvaotA2ikt3eeBaqlHf8WPe++lSWS7fETjgvzzbflp0Rj+v23kbb9e/VjUcPaD83shRuwzEo6CAO/AGxE+Zwbvv9NDsQT6T+S4CCDOFTuMRVv9/0E4P+uK+Vc3bMfQQD05gY/fes+ZX6ZHkvFdMn7zX8LMVvI59p7F806HPD2lBjs4lWWhQ5ckJDNflZL49370shr3/Q9uMJN9i/NVCu4OT7K3+4+/RkAMnjuY09u+3i4y4CldQG789iIAAAA="
}, Last, Mus = {};
['titlebar-button.titlebar-close',,'zoompage-we_dw-dev-',,'_531906d3-e22f-4a6c-a102-8057b88a1a63_-',,'_b9db16a4-6edc-47ec-a1f4-b86292ed211d_-'].forEach((c,i)=>{ //addons
if(c){F[i] = i == 0 ? c : c +"BAP"; F[i+1] = i == 0 ? c.replace("."," ") : c +"browser-action";}});
ua.forEach((c,i)=>{
	if(i == 0) k = 97; if(i == 26) k = 39; F[String.fromCharCode(i+k)] = c;
}); F.as = F.s +"custom_scripts/"+ F.R +".js";
var UcfGlob = Cu.getGlobalForObject(Cu)[Symbol.for("UcfGlob")], //–∏–∑ ucb_SaveHTML
{prefs, io} = Services, {Status, Pref} = UcfGlob, ua = `"/usr/bin/osmo"`; //linux
if(F.os == "win") ua = `"C:\\Windows\\system32\\StikyNot.exe"` //–≤–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã
else if(F.os == "macosx") ua = `"/usr/bin/open","-b","com.apple.Stickies"`;
F.run = `–∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ User.js ‚ïëuserjs(btn) ‚ïë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–ó–∞–ø–∏—Å–∫–∏¬ª ‚ïëUcfGlob.RunwA(${ua})`;
var Exp =()=>{
	return Number(prefs.getBoolPref(F.u +'expert',false))
},
tExp = (name,m = Exp(), t,z)=>{ //‚Ä¶ {–û–±—â–∏–πÔ∏∞–≠–∫—Å–ø–µ—Ä—Ç (m = 1)[Ô∏∞‚Ä¶]}
	t = Tag[name]; z = t.match(/(\{)([\s\S]*?)(\})/gm);
	if(z) z.forEach((k,h) =>{ //—Ç–µ–∫—Å—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞
		h = k.split('Ô∏∞'); if(h && h.length > m)
			t = t.replace(k,h[m].replace(/\{|\}/g,''));})
	return t;
},
ua = (real = false,uaa = F.z) => { //—Ç–µ–∫—É—â–∏–π, –≤—à–∏—Ç—ã–π –∏–ª–∏ –≤–∞—à –Æ–∑–µ—Ä–ê–≥–µ–Ω—Ç
	ttt = Pref(uaa); if (uaa != F.z) return ttt || F.G +"compatible; YandexBot/3.0; +http://yandex.com/bots)";
	prefs.clearUserPref(uaa); //–∫–æ—Å—Ç—ã–ª—å: —Å–±—Ä–æ—Å –Æ–∑–µ—Ä–ê–≥–µ–Ω—Ç
	u = Cc["@mozilla.org/network/protocol;1?name=http"].getService(Ci.nsIHttpProtocolHandler).userAgent;
	ttt && Pref(uaa,ttt); ttt ||= u; if(real) ttt = u; return ttt;
},
fonts = arr => arr.map(n => [(n == arr[arr.length-1] ? null : n), n]), //array —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
serif = fonts("Arial|Roboto|Cantarell|DejaVu Sans|PT Serif|Segoe UI|Ubuntu|Cambria|Fira Sans|Georgia|Noto Sans|Calibri|Times".split('|')), sans = [["PT Sans","PT Sans"], ...serif];
});